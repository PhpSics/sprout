<app-header></app-header>
<!-- ./inner_cont_body -->
<section class="inner_cont_body">
    <div class="container-fluid main_bg_white">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <app-side-menu></app-side-menu>
                <div class="admin_menus">
                    <div class="my_transport_all bg_admin_one">
                        <div class="goBackbtn">
                            <a href="javascript:;" (click)="downloadPDF()" class="btn">Export</a>
                        </div>

                        <div class="transport_title titles_tl">
                            <h3>Student Attendance</h3>
                        </div>
                        <div class="row">
                            <div class="col-md-6 offset-md-3">
                                <div class="form-group">
                                    <select class="form-control">
                                    <option value="">Select Subject</option>
                                    <option *ngFor="let subject of subjects" value="{{subject._id}}">{{subject.subjectName}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row text-center bg_white">
                            <div class="col-md-4">
                                <div class="btn-group">
                                    <div class="btn btn-primary" (click)="getAdminEvents(viewDate)" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate">
                                        Previous
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
                            </div>
                            <div class="col-md-4">
                                <div class="btn-group">
                                    <div class="btn btn-primary" mwlCalendarNextView (click)="getAdminEvents(viewDate)" [view]="view" [(viewDate)]="viewDate">
                                        Next
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="calendar_main">
                            <mwl-calendar-month-view [events]="events" [viewDate]="viewDate" (dayClicked)="dayClicked($event.day)">
                            </mwl-calendar-month-view>
                        </div>
                        <!-- <img src="https://jquery-plugins.net/image/plugin/jquery-simple-event-calendar.png" width="100%"> -->
                        <div class="tbl-cls" id="content" #content>
                            <table style="margin: 20px auto;">
                                <tbody>
                                    <tr>
                                        <td>Total Days Present</td>
                                        <td>: {{presentC}}</td>
                                    </tr>
                                    <tr>
                                        <td>Total Days Absent</td>
                                        <td>: {{absentC}}</td>
                                    </tr>
                                    <tr>
                                        <td>Total Days Attendance Taken</td>
                                        <td>: {{calEvents['attendanceCount']}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <div class="table-dot-info">

                                                <div class="single-dot">
                                                    <div class="dot dot-red"></div>
                                                    <span>Present</span>
                                                </div>

                                                <div class="single-dot">
                                                    <div class="dot dot-green"></div>
                                                    <span>Present</span>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div *ngIf="EventList.length>0" class="table-responsive">
                            <table class="table custom_table_one table-bordered">
                                <thead>
                                    <tr>
                                        <th>Reason</th>
                                    </tr>
                                </thead>
                                <tbody *ngIf="EventList.length>0">
                                    <tr *ngFor="let Event of EventList">
                                        <td>{{Event.title}}</td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="EventList.length==0">
                                    <tr>
                                        <td colspan="2">No Data</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- ./container -->
                </div>
            </div>
            <!-- ./admin_menus -->
        </div>
        <!-- ./col-lg-12 col-md-12 col-sm-12 col-xs-12 -->
    </div>
    <!-- ./row -->

</section>
<!-- ./inner_cont_body -->
<a class="btn btn_gobacks hidden" data-toggle="modal" data-target="#transport" #reason>Add Reason </a>
<div id="transport" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Reason</h4>
                <button type="button" class="close" data-dismiss="modal" #closeBtn>&times;</button>
            </div>
            <!-- ./modal-header -->
            <div class="modal-body">
                <div class="popup_p">
                    <form class="form-horizontal" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
                        <div class="form-group">
                            <select class="form-control" (change)="changeMe($event.target.value)" [(ngModel)]="model.reasons" name="reasonsel" #reasonsel="ngModel" [ngClass]="{ 'error': f.submitted && reasonsel.invalid }" required>
                          <option value="">Select Reason</option>
                          <option>Medical</option>
                          <option>Religious</option>
                          <option>Holiday</option>
                          <option>Planned</option>
                          <option>Field Trip</option>
                          <option>Other</option>
                        </select>
                        </div>
                        <div class="form-group">
                            <input *ngIf="reasonVal=='Other'" type="text" class="form-control" name="reason" #reason="ngModel" [ngClass]="{ 'error': f.submitted && reason.invalid }" [(ngModel)]="model.reason" required placeholder="Other">
                            <input *ngIf="reasonVal!='Other'" type="hidden" class="form-control" name="reason" #reason="ngModel" [(ngModel)]="model.reason" [ngClass]="{ 'error': f.submitted && reason.invalid }">
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn" value="Add">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>