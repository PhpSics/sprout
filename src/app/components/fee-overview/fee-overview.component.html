<app-header></app-header>
<!-- ./inner_cont_body -->
<section class="inner_cont_body">
    <div class="container-fluid main_bg_white">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <app-side-menu></app-side-menu>
                <div class="admin_menus">
                    <div class="my_transport_all bg_admin_one">
                        <div class="goBack">
                            <a href="javascript:;" (click)='backClicked()' class="btn"><i class="fa fa-chevron-left"></i> Back</a>
                        </div>

                        <div class="transport_title">
                            <h3>Fee Overview</h3>
                        </div>

                        <div class="search_div">
                            <input type="text" class="form-control" placeholder="Search" [(ngModel)]="searchTxt" name="searchTxt">
                            <i class="fa fa-search"></i>
                        </div>
                        <div class="search_div">
                            <form [formGroup]="termForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <select class="form-control" formControlName="termId" (change)="changeTerm($event.target.value,$event)">
                                            <option value="">Select Term</option>
                                            <option *ngFor="let term of terms" [attr.data-tstr]="term.TodtStr"
                                                [attr.data-fstr]="term.FromdtStr" value="{{term._id}}">{{term.termName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <select class="form-control" (change)="changeClass($event.target.value,$event)">
                                            <option value="">Select Class</option>
                                            <option *ngFor="let class of classes" [attr.data-class]="class.classId._id"
                                                value="{{class._id}}">{{class.classId.className}} {{class.streamName}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- <div class="row inv_b_all">
                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="inv_b">
                                    <span>No. Inovices : </span>
                                    <strong>120</strong>
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="inv_b">
                                    <span>No. Receipts : </span>
                                    <strong>120</strong>
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                <div class="inv_b">
                                    <span>No. Students AP : </span>
                                    <strong>120</strong>
                                </div>
                            </div>
                        </div> -->

                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <nav>
                                    <div class="nav nav-tabs custom-nav-tab" id="nav-tab" role="tablist">
                                        <a class="nav-item nav-link active" id="nav-total-invoice" data-toggle="tab" href="#nav-homework" role="tab" aria-controls="nav-home" aria-selected="true">Total Amount Invoiced = {{total}}</a>
                                        <a class="nav-item nav-link" id="nav-total-receive" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Total Received = {{receivedTotal}}</a>
                                        <a class="nav-item nav-link" id="nav-balanced" data-toggle="tab" href="#nav-balance" role="tab" aria-controls="nav-balance" aria-selected="false">Balance = {{balanceTotal}}</a>
                                    </div>
                                </nav>

                                <div class="tab-content tab-custom-bdy" id="nav-tabContent">
                                    <div class="tab-pane fade show active" id="nav-homework" role="tabpanel" aria-labelledby="nav-homework-tab">
                                        <div class="table-responsive">
                                            <button class="btn btn-primary pull-right top-adj" (click)="exportData('invoice')">Export</button>
                                            <table class="table table-striped custom_table_one custom_table_two table-bordered" [mfData]="fees | search:searchTxt" #mf="mfDataTable" [mfRowsOnPage]="50">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            <mfDefaultSorter by="createdAt">No.</mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="createdAt">Date</mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="invoiceNo">Invoice No</mfDefaultSorter>
                                                        </th>
                                                        <th>Student Id</th>
                                                        <th>
                                                            <mfDefaultSorter by="amount">Amount</mfDefaultSorter>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let fee of mf.data;let i=index;">
                                                        <ng-container *ngIf="fee == -1">
                                                            <td colspan="4" align="center">No Data Found</td>
                                                        </ng-container>
                                                        <ng-container *ngIf="fee!=-1">
                                                            <td>{{i+1}}</td>
                                                            <td>{{fee.createdAt | date:'d-MM-yyyy'}}</td>
                                                            <td>{{fee.invoiceNo}}</td>
                                                            <td *ngIf="fee.studentId.studentId!=''"><a class="curs-p" href="javascript:;" (click)="getStudentName(fee.studentId.studentName)" data-toggle="modal" data-target="#eventtransport">{{fee.studentId.studentId}}</a></td>
                                                            <td *ngIf="fee.studentId.studentId==''"><a class="curs-p" href="javascript:;" (click)="getStudentName(fee.studentId.studentName)" data-toggle="modal" data-target="#eventtransport">Nil</a></td>
                                                            <td>{{fee.amount}}</td>
                                                        </ng-container>
                                                    </tr>
                                                    <tr *ngIf="mf.data.length==0">
                                                        <td colspan="5">No Data</td>
                                                    </tr>
                                                </tbody>
                                                <tfoot>
                                                    <tr class="align-cls">
                                                        <td colspan="5">
                                                            <mfBootstrapPaginator></mfBootstrapPaginator>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                                        <div class="table-responsive">
                                            <button class="btn btn-primary pull-right top-adj" (click)="exportData('receipt')">Export</button>
                                            <table class="table table-striped custom_table_one custom_table_two table-bordered" [mfData]="payments" #pf="mfDataTable" [mfRowsOnPage]="50">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>
                                                            <mfDefaultSorter by="createdAt">Date</mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="receiptNo">Receipt No.
                                                            </mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="studentCode">Student ID
                                                            </mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="amountPaid">Amount</mfDefaultSorter>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let payment of pf.data;let j=index;">
                                                        <td>{{j+1}}</td>
                                                        <td>{{payment.createdAt|date:'dd-MM-yyyy'}}</td>
                                                        <td>{{payment.receiptNo}}</td>
                                                        <td *ngIf="payment.studentCode!=''"><a class="curs-p" href="javascript:;" (click)="getStudentName(payment.studentName)" data-toggle="modal" data-target="#eventtransport">{{payment.studentCode}}</a></td>
                                                        <td *ngIf="payment.studentCode==''"><a class="curs-p" href="javascript:;" (click)="getStudentName(payment.studentName)" data-toggle="modal" data-target="#eventtransport">Nil</a></td>
                                                        <td>{{payment.amountPaid}}</td>
                                                    </tr>
                                                    <tr *ngIf="pf.data.length==0">
                                                        <td colspan="5">No Data</td>
                                                    </tr>
                                                </tbody>
                                                <tfoot>
                                                    <tr class="align-cls">
                                                        <td colspan="5">
                                                            <mfBootstrapPaginator></mfBootstrapPaginator>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="nav-balance" role="tabpanel" aria-labelledby="nav-balanced-tab">
                                        <div class="table-responsive">
                                            <button class="btn btn-primary pull-right top-adj" (click)="exportData('balance')">Export</button>
                                            <table class="table table-striped custom_table_one custom_table_two table-bordered" [mfData]="balance" #bf="mfDataTable" [mfRowsOnPage]="50">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>
                                                            <mfDefaultSorter by="studentId.studentId">Student ID
                                                            </mfDefaultSorter>
                                                        </th>
                                                        <th>
                                                            <mfDefaultSorter by="balance">Amount</mfDefaultSorter>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let bal of bf.data;let k=index;">
                                                        <td>{{k+1}}</td>
                                                        <td *ngIf="bal.studentId.studentId!=''"><a class="curs-p" href="javascript:;" (click)="getStudentName(bal.studentId.studentName)" data-toggle="modal" data-target="#eventtransport">{{bal.studentId.studentId}}</a></td>
                                                        <td *ngIf="bal.studentId.studentId==''"><a class="curs-p" href="javascript:;" (click)="getStudentName(bal.studentId.studentName)" data-toggle="modal" data-target="#eventtransport">Nil</a></td>
                                                        <td>{{bal.balance}}</td>
                                                    </tr>
                                                    <tr *ngIf="bf.data.length==0">
                                                        <td colspan="3">No Data</td>
                                                    </tr>
                                                </tbody>
                                                <tfoot>
                                                    <tr class="align-cls">
                                                        <td colspan="3">
                                                            <mfBootstrapPaginator></mfBootstrapPaginator>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ./admin_menus -->
            </div>
            <!-- ./col-lg-12 col-md-12 col-sm-12 col-xs-12 -->
        </div>
        <!-- ./row -->
    </div>
    <!-- ./container -->
</section>
<!-- ./inner_cont_body -->

<div id="eventtransport" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Student Name</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- ./modal-header -->
            <div class="modal-body">

                <div class="popup_p">

                    <div class="form-group">
                        <label>{{stdName}}</label>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<app-footer></app-footer>